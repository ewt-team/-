用户账号相关设计
---
# 一、账号体系设计
## 1.1 账号
账号是一个自然人用户，在系统中的对象，具备用户信息、隶属的组织、角色等关联关系。系统设计时，保障一个人一个账号即可实现所需的业务逻辑。


账号的创建方式：
1. SSH控制台运维命令行；
2. 用户注册；
3. 组织管理员创建。


## 1.2 凭据
凭据是用户登录时的凭证，在不同场景下，用户可能会根据不同的信息来登录系统。
* 凭据与账号，远期要支持“多对多”的关联方式；
* 通过“凭据+密码”方式登录时，密码属于账号，而不是凭据。
### 1.2.1 账号密码
账号密码非必须配置，设定了密码时，可通过：“用户名+密码”或“手机号+密码”方式登录。
* 密码强度要求：6位以上，包含“大写字母、小写字母、数字、特殊符号”中的两种。
账号可配置全局唯一的用户名，也可以不设定，账号不作为业务系统的关联凭据。
* 用户名格式：4~20位的字符串，可由：数字、小写字母、符号“-”组成，首字母必须为小写字母；

### 1.2.2 手机号
参数：[国家代码]&[号码]。国家代码当前仅支持中国大陆(86)号码，作为默认值；
验证方式：短信验证码。

### 1.2.3 微信小程序
参数：[appid]&[openid]，即系统支持配置多个小程序前端；
验证方式：联合微信小程序框架内部认证。

### 1.2.4 浏览器自动登录token
格式：待讨论

## 1.3 组织机构
组织机构是面向集团、水厂等企业的数据结构。组织机构为树形结构，即子机构可隶属于唯一的父级节点；父节点下，可有多个子机构。
### 1.3.1 组织机构信息
* 名称
* 父节点
* 超级管理员
### 1.3.2 根组织机构
无父节点的组织机构，即根组织机构。通常直接付费的用户组织，由我公司服务人员创建出根组织机构。
1. 仅能由具备权限的公司内部员工创建;
2. 仅支持在PC端创建根组织机构;
3. 根组织机构必须指定已存在的账号为超管，不支持邀请

## 1.4 角色

# 二、页面设计
## 2.1 登录页
打开站点未能自动登录，或用户主动退出登录时，跳转到登录页。
### 2.1.1 小程序
* 支持“手机号/密码”、“账号/密码”登录，共用输入框。
* checkbox勾选“下次自动登录”，默认选中。
### 2.1.2 浏览器（含PC/手机）
* 支持“手机号/密码”、“账号/密码”登录，共用输入框。
* select选择保持登录：“仅一次、1天、7天、30天、永久”，默认：仅一次。

## 2.2 账号创建
### 2.2.1 用户主动注册
主动注册账号时，账号不与任何组织关联。
* 用户名、密码：网页注册时必须；小程序注册时可选。
* 基本资料：姓名、昵称、头像，均可选。
* 手机号：可选，填写时需验证码校验。
### 2.2.2 组织管理员创建账号



## 2.3 找回密码页面

## 2.4 组织机构创建（根级）
根组织机构为平台直接付费的集团或公司用户
